# 2026-02-06 生产环境更新部署文档 (最终版 - 补充 3)

## 1. 修复内容
本次更新主要修复 **Excel 批量导入数据未显示** 的问题。

**问题原因**：
1. Excel 表头带有 `*` 号（如 `批次号*`），而系统字段名为 `批次号`，导致无法匹配。
2. 日期格式在导入时未做处理，可能导致前端显示异常。

**修复方案**：
1. 导入时自动清洗 Excel 表头，去除 `*` 号和首尾空格。
2. 增加对日期/时间类型数据的自动转换处理。

## 2. 涉及文件清单
请将以下文件上传至服务器对应目录（覆盖原文件）：

### 后端代码 (Python)
- `apps/tasks/views.py` (修复 generic_test_data_entry 中的 Excel 导入逻辑)

## 3. 部署操作说明

### 第一步：上传文件
请将 `apps/tasks/views.py` 上传覆盖服务器上的同名文件。

### 第二步：无需迁移
本次修改仅涉及视图逻辑，不涉及数据库变更，**不需要**执行数据库迁移。

### 第三步：重启服务
```bash
# 重启 Gunicorn 服务
sudo systemctl restart gunicorn_lab
```

### 第四步：验证
1. 重新进入“批量数据录入”界面。
2. 再次上传您的 Excel 文件。
3. 检查数据是否已正确填充到表格中。
